# Redis入门-数据结构

## 1、什么是Redis？

Remote Dictionary Server，使用ANSI C语言编写，基于内存（可持久化）的键值对（key-value）字典结构数据存储系统；

Redis支持多个数据库，默认数量16个（从0开始，使用SELECT命令更换数据库），并且每个数据库的数据是隔离的不能共享，并且基于单机才有，如果是集群就没有数据库的概念；

通常被称为“数据结构服务器”，因为值（value）可以是字符串(String)、 哈希(Map)、 列表(list)、集合(sets) 和 有序集合(sorted sets)等类型；

## 2、Redis特性

##### 主要：

```properties
* 多数据类型: 支持string，list，set，zset，hash等数据结构的值存储；
* 数据持久化: 使用AOF，RDB进行数据持久化（磁盘）；
* 发布/订阅: 
* 主从复制（数据备份）: 支持master-slave模式的数据备份。
* 单线程 + 多路I/O复用:
```

##### 其他：

```properties
默认端口: 6379；
多数据库: 0-15，共16个数据库，使用select 0～15切换；
原子性: Redis的所有操作都是原子性的，同时Redis还支持对几个操作全并后的原子性执行；

性能极高: Redis能读的速度是110000次/s,写的速度是81000次/s；
丰富的数据类型: Redis支持二进制案例的 Strings, Lists, Hashes, Sets 及 Ordered Sets 数据类型操作；
丰富的特性: Redis还支持发布订阅（publish/subscribe）、通知、 key过期等等特性。
```

## 3、Redis数据类型（value值类型）

### 基础数据类型（5种）

##### String（字符串）

```
特性：字符串（String）是 Redis 最基本的数据类型；
     字符串（String）是基于 二进制安全 实现的，可以存储图片等任何信息；
     字符串（String）最大能存储 512MB 的数据。
场景：
简单动态字符串（SDS）：采用与分配冗余空间来减少内存的频繁分配，类似java的ArrayList（小于1M，2倍扩容，大于1M，扩容1M）；
```

##### Hash（哈希）：存储对象

```
特性：哈希（Hash）类型是字符串 key 和字符串 value 之间的映射，所以它十分适合用来表示一个对象信息；
     哈希（Hash）是通过 键值对（key-value）集合 实现,即编程语言中的Map类型；
     哈希（Hash）可以存储 2^32 -1 键值对（40多亿）。
场景：存储、读取、修改用户属性。
```

##### List（列表）：字符串列表

```
特性：List（列表）是简单的字符串列表，按照插入顺序排序；
     List（列表）类型是通过 链表(双向链表) 实现；
     List（列表）可以添加一个元素到列表的头部（左边）或者尾部（右边）；
     List（列表）增删快，提供了操作某一段元素的API；
     List（列表）可存储 2^32 - 1 个元素 (4294967295, 每个列表可存储40多亿)。
场景：最新消息排行等功能(比如朋友圈的时间线) ；
     消息队列。
```

##### Set（集合）：是 String 类型的无序集合

```
特性：Set（集合）是 string 类型的无序且不重复集合；
     Set（集合）是通过哈希表实现的，所以添加，删除，查找的复杂度都是 O(1)；
     Set（集合）可存储 2^32 - 1 个元素(4294967295, 每个集合可存储40多亿个成员)。
场景：共同好友；
     利用唯一性，统计访问网站的所有独立ip；
     好友推荐时，根据tag求交集，大于某个阈值就可以推荐。
```

##### sorted set（zset，有序集合）：string 类型元素的集合，通过score进行排序

```
特性：sorted set（有序集合）是 string 类型 有序且不允许重复 的集合；
     sorted set（有序集合）每个元素都会关联一个double类型的分数（score），redis通过分数（score）为元素进行从小到大的排序；
     sorted set（有序集合）元素是唯一的，但分数（score）却可以重复；
场景：排行榜；
     带权重的消息队列。
```

### 扩展数据类型（4种）

##### HyperLogLog：基数统计

````
特性：HyperLogLog 是 Redis 在 2.8.9 版本之后加入的数据结构，
     HyperLogLog 是一种用于基数统计的数据集合类型。
     HyperLogLog 每个只需要花费 12 KB 内存，就可以对 2^64 个数据完成基数统计；
     HyperLogLog 的最大优势就在于，当集合元素数量非常多时，它计算基数所需的空间总是固定的，而且还很小。
场景：是用来做基数统计的算法，统计网页的UV。 
````

##### Bitmap

```
特性：Bitmap 也被称为位图，是以 String 类型作为底层数据结构实现的一种统计二值状态的数据类型。
     其中每一个bit都只能是0或1，所以通常用来表示一个对应于数组下标的数据是否存在。
     Bitmap 提供了一系列api，主要用于对 bit 位进行读写、计算、统计等操作。
场景：布隆过滤器应对缓存穿透的问题；
     用户签到；
     朋友圈点赞。
```

##### GEO

````
特性：GEO 在Redis 3.2版本后被添加，可以说是针对LBS（Location-Based Service）产生的一种数据类型;
     GEO 数据在Redis中的存储方式，是以zset格式进行存储的，因此geo是zset的一个扩展;
     GEO主要用于存储地理位置信息，并可以对存储的信息进行一系列的计算操作;
场景：基于查询相邻的经纬度范围，能简单实现类似“附近的人”等功能；
````

### Stream

```
特性：Stream 是 Redis 5.0 版本之后新增加的数据结构；
     Stream 实现了消息队列的功能，并且实现消息的持久化和主备复制功能，可以让任何客户端访问任何时刻的数据，并且能记住每一个客户端的访问位置，保证消息不丢失。
场景：消息队列；
```