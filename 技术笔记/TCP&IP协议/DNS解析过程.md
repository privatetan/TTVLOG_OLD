# DNS解析过程

## DNS

DNS，域名系统，作用是将主机名转化为IP地址；

DNS 是一个应用层协议，基于传输层的UDP协议；

DNS 是一个分布式数据库，由全球很多台 DNS 服务器组成；

## DNS服务器的分类分层

- ### 根服务器

  11

- ### 顶级服务器

  22

- ### 权威服务器

  22

## DNS本地服务器

每个 ISP 都有一台本地 DNS 服务器，比如一个居民区的 ISP、一个机构的 ISP，都有一台或多台本地 DNS 服务器；

本地 DNS 服务器起着代理的作用：当主机发出 DNS 请求时，该请求被发往本地 DNS 服务器，并负责将该请求**转发**到 DNS 服务器层次结构中。

严格来说，本地 DNS 服务器并不属于 DNS 的层次结构，但它对 DNS 层次结构是至关重要的。

## DNS解析过程

- ### 使用方法

  迭代+递归；

- ### 具体步骤

  1. 检查浏览器缓存中是否缓存过该域名对应的IP地址；
  2. 在浏览器缓存中没有找到IP，那么将继续查找本机系统是否缓存过IP；
  3. 在本机上无法完成域名的解析，向本地域名解析服务系统发起域名解析的请求；
  4. 本地域名解析器还没有完成解析的话，那么本地域名解析服务器将向根域名服务器发起解析请求；
  5. 22
  6. 22

  7. 33

- ### TTL参数

  TTL：Time To Live，这个参数告诉本地DNS服务器，域名缓存的最长时间。

  阿里云解析默认的TTL是10分钟，10分钟的含义是，本地DNS服务器对于域名的缓存时间是10分钟，10分钟之后，本地DNS服务器就会删除这条记录，删除之后，如果有用户访问这个域名，就要进行DNS解析流程。

  如果网站已经进入稳定发展的状态，不会轻易更换IP地址，我们完全可以将TTL设置到协议最大值，即24小时。带来的好处是，让域名解析记录能够更长时间的存放在本地DNS服务器中，以加快所有用户的访问。